<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kuesioner SPPG</title>
    <meta name="description" content="Kuesioner Monitoring Program Budidaya Ikan Tematik">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="">
    <link rel="icon" type="image/png" href="logo-kkp.png">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>
    <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>
</head>
<body>
    <!-- Login Screen -->
    <div class="login-overlay" id="loginOverlay">
        
        <div class="ocean-waves">
            <div class="wave wave1"></div>
            <div class="wave wave2"></div>
            <div class="wave wave3"></div>
            <div class="wave wave4"></div>
        </div>
        
        <div class="bubbles">
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div class="bubble"></div>
        </div>
        
        <div class="seaweed-container">
            <div class="seaweed seaweed1">ğŸŒ¿</div>
            <div class="seaweed seaweed2">ğŸŒ¿</div>
            <div class="seaweed seaweed3">ğŸŒ¿</div>
            <div class="seaweed seaweed4">ğŸŒ¿</div>
            <div class="seaweed seaweed5">ğŸŒ¿</div>
        </div>
        
        <div class="coral-container">
            <div class="coral coral1">ğŸª¸</div>
            <div class="coral coral2">ğŸ</div>
            <div class="coral coral3">ğŸª¸</div>
        </div>
        
        <div class="fish-container">
            <div class="fish fish1">ğŸŸ</div>
            <div class="fish fish2">ğŸ </div>
            <div class="fish fish3">âœ‹ğŸ˜ŒğŸ¤š</div>
            <div class="fish fish4"></div>
            <div class="fish fish5">ğŸš“</div>
            <div class="fish fish6">ğŸ </div>
            <div class="fish fish7">ğŸ¡</div>
            <div class="fish fish8">ğŸ§œâ€â™‚ï¸</div>
            <div class="fish fish9">ğŸŸ</div>
            <div class="fish fish10">ğŸ›µ</div>
        </div>
        <div class="login-container">
            <div class="login-card">
                <div class="login-header">
                    <div class="login-logo"><img src="logo-kkp.png" alt="Logo KKP" style="width: 80px; height: 80px;"></div>
                    <h1>Kuesioner SPPG</h1>
                    <p>Silakan login untuk mengakses dashboard</p>
                </div>
                <form id="loginForm" class="login-form">
                    <div class="login-input-group">
                        <label for="loginUsername">Username</label>
                        <input type="text" id="loginUsername" placeholder="Masukkan username" required autocomplete="username">
                    </div>
                    <div class="login-input-group">
                        <label for="loginPassword">Password</label>
                        <div class="password-wrapper">
                            <input type="password" id="loginPassword" placeholder="Masukkan password" required autocomplete="current-password">
                            <button type="button" class="toggle-password" onclick="togglePassword()">ğŸ‘ï¸</button>
                        </div>
                    </div>
                    <div class="login-error" id="loginError"></div>
                    <button type="submit" class="login-btn">ğŸ” Masuk</button>
                </form>
                <div class="login-footer">
                    <p>Hubungi admin untuk kredensial</p>
                </div>
            </div>
        </div>
    </div>

    <header class="mobile-header">
        <button class="hamburger" id="hamburgerBtn" aria-label="Toggle menu"><span></span><span></span><span></span></button>
        <h1 class="mobile-title"><img src="logo-kkp.png" alt="Logo" style="width: 28px; height: 28px; vertical-align: middle; margin-right: 8px;">Kuesioner Budidaya</h1>
    </header>

    <nav class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="logo"><span class="logo-icon"><img src="logo-kkp.png" alt="Logo KKP" style="width: 40px; height: 40px;"></span><span class="logo-text">Kuesioner SPPG</span></div>
        </div>
        <ul class="nav-menu">
            <li class="nav-item"><a href="#dashboard" class="nav-link active" data-page="dashboard"><span class="nav-icon">ğŸ“Š</span><span class="nav-text">Dashboard</span></a></li>
            <li class="nav-item"><a href="#kuesioner" class="nav-link" data-page="kuesioner"><span class="nav-icon">ğŸ“</span><span class="nav-text">Kuesioner KDMP</span></a></li>
            <li class="nav-item"><a href="#kuesioner-masyarakat" class="nav-link" data-page="kuesioner-masyarakat"><span class="nav-icon">ğŸ‘¥</span><span class="nav-text">Kuesioner Masyarakat</span></a></li>
            <li class="nav-item"><a href="#kuesioner-sppg" class="nav-link" data-page="kuesioner-sppg"><span class="nav-icon">ğŸ«</span><span class="nav-text">Kuesioner SPPG</span></a></li>
            <li class="nav-item admin-only" id="menuUserManagement"><a href="#user-management" class="nav-link" data-page="user-management"><span class="nav-icon">âš™ï¸</span><span class="nav-text">Manajemen User</span></a></li>
        </ul>
        <div class="sidebar-footer">
            <div class="user-info" id="userInfo">
                <span class="user-icon">ğŸ‘¤</span>
                <div class="user-details">
                    <span class="user-name" id="currentUser">Admin</span>
                    <span class="user-role" id="currentUserRole">admin</span>
                </div>
            </div>
            <button class="logout-btn" onclick="logout()">ğŸšª Logout</button>
            <p>Â© 2025 Kementerian Kelautan dan Perikanan</p>
        </div>
    </nav>

    <div class="overlay" id="overlay"></div>

    <main class="main-content">
        <!-- Dashboard -->
        <section class="page active" id="dashboard">
            <div class="page-header"><h1>Dashboard Analisis</h1><p class="subtitle">Visualisasi data kuesioner budidaya ikan tematik untuk SPPG</p></div>
            <div class="stats-grid">
                <div class="stat-card gradient-1"><div class="stat-icon">ğŸ“</div><div class="stat-info"><span class="stat-value" id="totalKuesioner">0</span><span class="stat-label">Total Kuesioner</span></div></div>
                <div class="stat-card gradient-2"><div class="stat-icon">ğŸ¢</div><div class="stat-info"><span class="stat-value" id="totalKoperasi">0</span><span class="stat-label">Koperasi Terdata</span></div></div>
                <div class="stat-card gradient-3"><div class="stat-icon">ğŸ‘¥</div><div class="stat-info"><span class="stat-value" id="totalPembudidaya">0</span><span class="stat-label">Total Pembudidaya</span></div></div>
                <div class="stat-card gradient-4"><div class="stat-icon">ğŸ“ˆ</div><div class="stat-info"><span class="stat-value" id="avgProgress">0%</span><span class="stat-label">Rata-rata Progres</span></div></div>
            </div>
            
            <!-- Export/Import Section -->
            <div class="export-section">
                <div class="export-card">
                    <div class="export-header">
                        <h3>ğŸ’¾ Backup & Export Data</h3>
                        <p>Download semua data kuesioner untuk backup atau analisis lebih lanjut</p>
                    </div>
                    <div class="export-buttons">
                        <button class="export-btn excel" onclick="exportToExcel()">
                            <span class="export-icon">ğŸ“Š</span>
                            <span class="export-text">
                                <strong>Export Excel</strong>
                                <small>Download semua data dalam format .xlsx</small>
                            </span>
                        </button>
                        <button class="export-btn json" onclick="exportToJSON()">
                            <span class="export-icon">ğŸ“</span>
                            <span class="export-text">
                                <strong>Backup JSON</strong>
                                <small>Simpan backup lengkap untuk restore</small>
                            </span>
                        </button>
                        <label class="export-btn import">
                            <input type="file" id="importFile" accept=".json" onchange="importFromJSON(event)" hidden>
                            <span class="export-icon">ğŸ“¥</span>
                            <span class="export-text">
                                <strong>Import Backup</strong>
                                <small>Restore dari file backup JSON</small>
                            </span>
                        </label>
                    </div>
                </div>
            </div>
            <div class="charts-grid">
                <div class="chart-card"><h3 class="chart-title">Sebaran Komoditas</h3><div class="chart-container"><canvas id="komoditasChart"></canvas></div></div>
                <div class="chart-card"><h3 class="chart-title">Progres Pembangunan</h3><div class="chart-container"><canvas id="progresChart"></canvas></div></div>
                <div class="chart-card"><h3 class="chart-title">Hambatan Koperasi</h3><div class="chart-container"><canvas id="hambatanChart"></canvas></div></div>
                <div class="chart-card"><h3 class="chart-title">Status Instalasi</h3><div class="chart-container"><canvas id="instalasiChart"></canvas></div></div>
            </div>
            
            <!-- Map Section -->
            <div class="map-section">
                <div class="map-card">
                    <div class="map-header">
                        <h3>ğŸ—ºï¸ Peta Lokasi KDMP</h3>
                        <p>Sebaran titik lokasi Koperasi Desa Merah Putih yang terdata</p>
                    </div>
                    <div class="map-container" id="kdmpMap"></div>
                    <div class="map-legend">
                        <div class="legend-item"><span class="legend-marker"></span><span>Lokasi KDMP</span></div>
                        <div class="map-stats" id="mapStats">
                            <span>ğŸ“ <strong id="totalLocations">0</strong> lokasi</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Kuesioner KDMP (All 4 sections) -->
        <section class="page" id="kuesioner">
            <div class="page-header"><h1>Kuesioner KDMP</h1><p class="subtitle">Input data lengkap kuesioner KDMP</p></div>
            
            <!-- Data Verifikator & Responden (Shared) -->
            <div class="verifikator-card modern-form">
                <div class="form-section"><h3>ğŸ“‹ Data Verifikator & Responden</h3>
                    <div class="form-row"><div class="form-group"><label>Nama Verifikator</label><input type="text" id="kdmp_verifikator" required></div><div class="form-group"><label>Nama Responden</label><input type="text" id="kdmp_responden" required></div></div>
                    <div class="form-row-3"><div class="form-group"><label>Tempat</label><input type="text" id="kdmp_tempat" placeholder="Kota/Kabupaten"></div><div class="form-group"><label>Tanggal</label><input type="date" id="kdmp_tanggal"></div><div class="form-group"><label>Jam</label><input type="time" id="kdmp_jam"></div></div>
                    <div class="form-row"><div class="form-group"><label>Jenis Kelamin</label><select id="kdmp_jk"><option value="Laki-laki">Laki-laki</option><option value="Perempuan">Perempuan</option></select></div><div class="form-group"><label>Umur</label><input type="number" id="kdmp_umur" min="0"></div></div>
                    <div class="form-row"><div class="form-group"><label>Pendidikan</label><select id="kdmp_pendidikan"><option value="SD">SD</option><option value="SMP">SMP</option><option value="SMA">SMA</option><option value="D3">D3</option><option value="S1">S1</option><option value="S2">S2</option><option value="S3">S3</option></select></div><div class="form-group"><label>Pekerjaan/Jabatan</label><input type="text" id="kdmp_pekerjaan"></div></div>
                    <div class="form-group"><label>Alamat KTP</label><input type="text" id="kdmp_alamat"></div>
                </div>
            </div>

            <!-- Tab Navigation -->
            <div class="tab-nav">
                <button class="tab-btn active" data-tab="tab-a">A. Identitas Lembaga</button>
                <button class="tab-btn" data-tab="tab-b">B. Sosial Ekonomi</button>
                <button class="tab-btn" data-tab="tab-c">C. Pengamatan Lapangan</button>
                <button class="tab-btn" data-tab="tab-d">D. Rencana Bisnis</button>
            </div>

            <!-- Tab A: Identitas Lembaga -->
            <div class="tab-content active" id="tab-a">
                <div class="form-container">
                    <form id="formA" class="modern-form">
                        <div class="form-section"><h3>Data Koperasi & Lokasi</h3>
                            <div class="form-row"><div class="form-group"><label>Nama Koperasi KDMP</label><input type="text" id="a_koperasi" required></div><div class="form-group"><label>Nomor Badan Hukum</label><input type="text" id="a_badan_hukum"></div></div>
                            <div class="form-row"><div class="form-group"><label>Desa/Kelurahan</label><input type="text" id="a_desa"></div><div class="form-group"><label>Kecamatan</label><input type="text" id="a_kecamatan"></div></div>
                            <div class="form-row"><div class="form-group"><label>Kabupaten/Kota</label><input type="text" id="a_kabkota" required></div><div class="form-group"><label>Provinsi</label><select id="a_provinsi" required><option value="Aceh">Aceh</option><option value="Sumatera Utara">Sumatera Utara</option><option value="Sumatera Barat">Sumatera Barat</option></select></div></div>
                            <div class="form-row"><div class="form-group"><label>Luas Lahan (mÂ²)</label><input type="number" id="a_luas" min="858" placeholder="Min 858 mÂ²/paket"></div><div class="form-group"><label>Jumlah Paket Bantuan</label><input type="number" id="a_paket" min="1"></div></div>
                            <div class="form-row"><div class="form-group"><label>Komoditas</label><select id="a_komoditas" required><option value="Lele">Ikan Lele</option><option value="Nila">Ikan Nila</option></select></div><div class="form-group"><label>Koordinat Lokasi</label><input type="text" id="a_koordinat" placeholder="lat, long"></div></div>
                        </div>
                        <div class="form-section"><h3>Kriteria Administrasi</h3>
                            <div class="checklist-group">
                                <div class="checklist-item"><label class="toggle-label"><input type="checkbox" id="a_krit1"><span class="toggle-text">Badan hukum KDMP dengan KBLI 03221</span></label><input type="text" class="sub-input" id="a_krit1_kbli" placeholder="No. KBLI"></div>
                                <div class="checklist-item"><label class="toggle-label"><input type="checkbox" id="a_krit2"><span class="toggle-text">e-Kusuka terdaftar di satudata.kkp.go.id</span></label></div>
                                <div class="checklist-item"><label class="toggle-label"><input type="checkbox" id="a_krit3"><span class="toggle-text">Pengurus/anggota aktif JKN</span></label></div>
                                <div class="checklist-item"><label class="toggle-label"><input type="checkbox" id="a_krit4"><span class="toggle-text">Permohonan, proposal & rencana usaha disampaikan</span></label></div>
                                <div class="checklist-item"><label class="toggle-label"><input type="checkbox" id="a_krit5"><span class="toggle-text">Pernyataan kesanggupan operasional & perawatan</span></label></div>
                                <div class="checklist-item"><label class="toggle-label"><input type="checkbox" id="a_krit6"><span class="toggle-text">Belum pernah menerima bantuan serupa 1 tahun</span></label></div>
                                <div class="checklist-item"><label class="toggle-label"><input type="checkbox" id="a_krit7"><span class="toggle-text">Sudah mendapat pelatihan teknis budidaya</span></label><input type="number" class="sub-input" id="a_krit7_hari" placeholder="Berapa hari?"></div>
                                <div class="checklist-item"><label class="toggle-label"><input type="checkbox" id="a_krit8"><span class="toggle-text">Koperasi kelola pakan, pemasaran, pencatatan bersama</span></label></div>
                            </div>
                            <div class="form-group" style="margin-top:1rem"><label>Hambatan utama koperasi</label>
                                <div class="checkbox-group">
                                    <label class="checkbox-label"><input type="checkbox" name="a_hambatan" value="SDM"><span class="checkmark"></span>SDM</label>
                                    <label class="checkbox-label"><input type="checkbox" name="a_hambatan" value="Modal"><span class="checkmark"></span>Modal</label>
                                    <label class="checkbox-label"><input type="checkbox" name="a_hambatan" value="Kepercayaan"><span class="checkmark"></span>Kepercayaan</label>
                                    <label class="checkbox-label"><input type="checkbox" name="a_hambatan" value="Pasar"><span class="checkmark"></span>Pasar</label>
                                    <label class="checkbox-label"><input type="checkbox" name="a_hambatan" value="Tata Kelola"><span class="checkmark"></span>Tata Kelola</label>
                                </div>
                            </div>
                        </div>
                        <div class="form-section"><h3>Catatan</h3>
                            <div class="form-group"><label>Catatan/Rekomendasi</label><textarea id="a_catatan" rows="2"></textarea></div>
                        </div>
                        <button type="submit" class="btn-submit"><span class="btn-icon">ğŸ’¾</span>Simpan Bagian A</button>
                    </form>
                </div>
            </div>

            <!-- Tab B: Sosial Ekonomi -->
            <div class="tab-content" id="tab-b">
                <div class="form-container">
                    <form id="formB" class="modern-form">
                        <div class="form-section"><h3>Data Produksi Wilayah</h3>
                            <div class="form-row"><div class="form-group"><label>Jumlah Pembudidaya Ikan</label><input type="number" id="b_jml_pembudidaya" min="0"></div><div class="form-group"><label>Jumlah Pokdakan per Desa</label><input type="number" id="b_jml_pokdakan" min="0"></div></div>
                            <div class="form-group"><label>Jenis Komoditas Terbanyak</label><input type="text" id="b_komoditas_terbanyak" placeholder="Jenis ikan yang paling banyak dihasilkan"></div>
                            <div class="form-row"><div class="form-group"><label>Jumlah Produksi Ikan (Kg/bulan)</label><input type="number" id="b_jml_produksi" min="0"></div><div class="form-group"><label>Konsumsi Ikan/Kapita (Kg)</label><input type="number" id="b_konsumsi" min="0" step="0.1"></div></div>
                            <div class="form-group"><label>Jenis Ikan Diperdagangkan di Pasar</label><input type="text" id="b_ikan_pasar" placeholder="Sebutkan jenis ikan"></div>
                        </div>
                        <div class="form-section"><h3>Catatan</h3>
                            <div class="form-group"><label>Catatan Tambahan</label><textarea id="b_catatan" rows="2"></textarea></div>
                        </div>
                        <button type="submit" class="btn-submit"><span class="btn-icon">ğŸ’¾</span>Simpan Bagian B</button>
                    </form>
                </div>
            </div>

            <!-- Tab C: Pengamatan Lapangan -->
            <div class="tab-content" id="tab-c">
                <div class="form-container">
                    <form id="formC" class="modern-form">
                        <div class="form-section"><h3>Koordinat Lokasi</h3>
                            <div class="form-row"><div class="form-group"><label>Koordinat GPS</label><input type="text" id="c_koordinat" placeholder="lat, long"></div></div>
                        </div>
                        <div class="form-section"><h3>Kriteria Lahan</h3>
                            <div class="checklist-group">
                                <div class="checklist-item"><label class="toggle-label"><input type="checkbox" id="c_lahan1"><span class="toggle-text">Lahan datar/padat (sudah rata)</span></label></div>
                                <div class="checklist-item"><label class="toggle-label"><input type="checkbox" id="c_lahan2"><span class="toggle-text">Legalitas lahan (sertifikat/sewa 5 tahun)</span></label></div>
                                <div class="checklist-item"><label class="toggle-label"><input type="checkbox" id="c_lahan3"><span class="toggle-text">Sumber air tawar mencukupi</span></label></div>
                                <div class="checklist-item"><label class="toggle-label"><input type="checkbox" id="c_lahan4"><span class="toggle-text">Sumber listrik â‰¥2.200 watt</span></label></div>
                                <div class="checklist-item"><label class="toggle-label"><input type="checkbox" id="c_lahan5"><span class="toggle-text">Akses transportasi memadai</span></label></div>
                                <div class="checklist-item"><label class="toggle-label"><input type="checkbox" id="c_lahan6"><span class="toggle-text">Jauh dari sumber pencemar (IPAL/TPA)</span></label></div>
                                <div class="checklist-item"><label class="toggle-label"><input type="checkbox" id="c_lahan7"><span class="toggle-text">Prasarana terpasang: 24 kolam Ã˜4m, aerasi</span></label></div>
                            </div>
                        </div>
                        <div class="form-section"><h3>Status Instalasi Fisik</h3>
                            <div class="checklist-group">
                                <div class="checklist-item"><label class="toggle-label"><input type="checkbox" id="c_inst1"><span class="toggle-text">Pemasangan bak bulat terpal</span></label></div>
                                <div class="checklist-item"><label class="toggle-label"><input type="checkbox" id="c_inst2"><span class="toggle-text">Pekerjaan lantai (urugan pasir, beton, bekisting)</span></label></div>
                                <div class="checklist-item"><label class="toggle-label"><input type="checkbox" id="c_inst3"><span class="toggle-text">Instalasi air (pipa utama, sambungan, uji penyaliran)</span></label></div>
                                <div class="checklist-item"><label class="toggle-label"><input type="checkbox" id="c_inst4"><span class="toggle-text">Instalasi listrik (penerangan, panel kontrol)</span></label></div>
                                <div class="checklist-item"><label class="toggle-label"><input type="checkbox" id="c_inst5"><span class="toggle-text">Instalasi aerasi (pemasangan & uji coba)</span></label></div>
                                <div class="checklist-item"><label class="toggle-label"><input type="checkbox" id="c_inst6"><span class="toggle-text">Atap kolam (tiang, rangka, atap)</span></label></div>
                                <div class="checklist-item"><label class="toggle-label"><input type="checkbox" id="c_inst7"><span class="toggle-text">Peralatan: ember, pompa, gapura KDMP</span></label></div>
                                <div class="checklist-item"><label class="toggle-label"><input type="checkbox" id="c_inst8"><span class="toggle-text">Instalasi Pengolah Air Limbah (IPAL)</span></label></div>
                            </div>
                        </div>
                        <div class="form-section"><h3>Rekapitulasi Progres (%)</h3>
                            <div class="form-group"><label>Progres Bangunan/Shelter: <span id="c_prog1_val">50</span>%</label><input type="range" class="slider" id="c_prog1" min="0" max="100" value="50"></div>
                            <div class="form-group"><label>Progres Pemasangan Kolam: <span id="c_prog2_val">50</span>%</label><input type="range" class="slider" id="c_prog2" min="0" max="100" value="50"></div>
                            <div class="form-group"><label>Progres Instalasi Listrik: <span id="c_prog3_val">50</span>%</label><input type="range" class="slider" id="c_prog3" min="0" max="100" value="50"></div>
                            <div class="form-group"><label>Progres Saluran Air: <span id="c_prog4_val">50</span>%</label><input type="range" class="slider" id="c_prog4" min="0" max="100" value="50"></div>
                            <div class="form-group"><label>Progres Saluran Aerasi: <span id="c_prog5_val">50</span>%</label><input type="range" class="slider" id="c_prog5" min="0" max="100" value="50"></div>
                        </div>
                        <div class="form-section"><h3>Tenaga Kerja Konstruksi</h3>
                            <div class="form-row"><div class="form-group"><label>Tenaga Kerja Laki-laki</label><input type="number" id="c_tk_laki" min="0"></div><div class="form-group"><label>Tenaga Kerja Perempuan</label><input type="number" id="c_tk_perempuan" min="0"></div></div>
                            <div class="form-row"><div class="form-group"><label>Upah/Hari (Rp)</label><input type="number" id="c_upah" min="0"></div><div class="form-group"><label>Jam Kerja/Hari</label><input type="number" id="c_jam_kerja" min="0"></div></div>
                            <div class="form-row"><div class="form-group"><label>TK Lokal</label><input type="number" id="c_tk_lokal" min="0"></div><div class="form-group"><label>TK Luar Daerah</label><input type="number" id="c_tk_luar" min="0"></div></div>
                        </div>
                        <div class="form-section"><h3>Kendala & SOP</h3>
                            <div class="form-group"><label>Kendala Pembangunan</label>
                                <div class="checkbox-group">
                                    <label class="checkbox-label"><input type="checkbox" name="c_kendala" value="Cuaca"><span class="checkmark"></span>Cuaca</label>
                                    <label class="checkbox-label"><input type="checkbox" name="c_kendala" value="Tenaga Kerja"><span class="checkmark"></span>Tenaga Kerja</label>
                                    <label class="checkbox-label"><input type="checkbox" name="c_kendala" value="Material"><span class="checkmark"></span>Material</label>
                                    <label class="checkbox-label"><input type="checkbox" name="c_kendala" value="Akses"><span class="checkmark"></span>Akses Lokasi</label>
                                    <label class="checkbox-label"><input type="checkbox" name="c_kendala" value="Listrik"><span class="checkmark"></span>Listrik</label>
                                    <label class="checkbox-label"><input type="checkbox" name="c_kendala" value="BBM"><span class="checkmark"></span>BBM</label>
                                    <label class="checkbox-label"><input type="checkbox" name="c_kendala" value="Air"><span class="checkmark"></span>Air Bersih</label>
                                </div>
                            </div>
                            <div class="form-row"><div class="form-group"><label>SOP Operasional Bioflok</label><select id="c_sop"><option value="Sudah">Sudah Disusun</option><option value="Belum">Belum Disusun</option></select></div><div class="form-group"><label>Kendala SOP (jika belum)</label><input type="text" id="c_sop_kendala"></div></div>
                        </div>
                        <button type="submit" class="btn-submit"><span class="btn-icon">ğŸ’¾</span>Simpan Bagian C</button>
                    </form>
                </div>
            </div>

            <!-- Tab D: Rencana Bisnis -->
            <div class="tab-content" id="tab-d">
                <div class="form-container">
                    <form id="formD" class="modern-form">
                        <div class="form-section"><h3>Data Responden</h3>
                            <div class="form-row"><div class="form-group"><label>Nama Responden (Pengurus KDMP)</label><input type="text" id="d_responden" required></div><div class="form-group"><label>Nama Koperasi</label><input type="text" id="d_koperasi" required></div></div>
                        </div>
                        <div class="form-section"><h3>Pemasaran Hasil Panen</h3>
                            <div class="form-group"><label>Tujuan Penjualan</label>
                                <div class="checkbox-group">
                                    <label class="checkbox-label"><input type="checkbox" name="d_tujuan" value="Pasar/Eceran"><span class="checkmark"></span>Langsung ke Pasar/Eceran</label>
                                    <label class="checkbox-label"><input type="checkbox" name="d_tujuan" value="Koperasi"><span class="checkmark"></span>Koperasi</label>
                                    <label class="checkbox-label"><input type="checkbox" name="d_tujuan" value="Tengkulak"><span class="checkmark"></span>Tengkulak</label>
                                    <label class="checkbox-label"><input type="checkbox" name="d_tujuan" value="Pengepul"><span class="checkmark"></span>Pengepul</label>
                                    <label class="checkbox-label"><input type="checkbox" name="d_tujuan" value="Pedagang Besar"><span class="checkmark"></span>Pedagang Besar (PT/CV/BUMD)</label>
                                    <label class="checkbox-label"><input type="checkbox" name="d_tujuan" value="SPPG"><span class="checkmark"></span>SPPG</label>
                                </div>
                            </div>
                            <div class="form-group"><label>Tujuan Lainnya</label><input type="text" id="d_tujuan_lain"></div>
                        </div>
                        <div class="form-section"><h3>Manajemen Operasional & Risiko</h3>
                            <div class="form-row"><div class="form-group"><label>Penanggung Jawab Operasional</label><select id="d_pj_operasional"><option value="Ketua">Ketua</option><option value="Pengurus">Pengurus</option><option value="Anggota">Anggota</option><option value="Tenaga Khusus">Tenaga Khusus</option></select></div><div class="form-group"><label>Modal â‰¥1 Siklus Tersedia?</label><select id="d_modal"><option value="Ya">Ya</option><option value="Belum">Belum</option></select></div></div>
                            <div class="form-group"><label>Strategi Antisipasi Gagal Panen</label><select id="d_strategi"><option value="Diversifikasi">Diversifikasi Usaha</option><option value="Dukungan Koperasi">Dukungan Koperasi</option><option value="Pinjaman">Pinjaman</option><option value="Belum Ada">Belum Ada Strategi</option></select></div>
                            <div class="form-group"><label>Potensi Kendala Pemasaran</label><textarea id="d_kendala_pemasaran" rows="2"></textarea></div>
                            <div class="form-group"><label>Rencana Antisipasi</label><textarea id="d_antisipasi" rows="2"></textarea></div>
                        </div>
                        <button type="submit" class="btn-submit"><span class="btn-icon">ğŸ’¾</span>Simpan Bagian D</button>
                    </form>
                </div>
            </div>

            <!-- Import Excel Section -->
            <div class="import-section">
                <div class="import-card">
                    <div class="import-header">
                        <h3>ğŸ“¥ Import Data Excel</h3>
                        <p>Upload file Excel (.xlsx/.xls) untuk import data kuesioner KDMP secara massal</p>
                    </div>
                    <div class="import-actions">
                        <label class="import-btn">
                            <input type="file" id="importKdmpExcel" accept=".xlsx,.xls" onchange="importKDMPFromExcel(event)" hidden>
                            <span class="import-icon">ğŸ“Š</span>
                            <span class="import-text">
                                <strong>Pilih File Excel</strong>
                                <small>Format: .xlsx atau .xls</small>
                            </span>
                        </label>
                        <button class="template-btn" onclick="downloadKDMPTemplate()">
                            <span>ğŸ“‹</span> Download Template
                        </button>
                    </div>
                </div>
            </div>

            <!-- Document Cards -->
            <div class="document-cards-container">
                <h3>ğŸ“„ Data Kuesioner Tersimpan</h3>
                <div class="document-cards-grid" id="kdmpCardsGrid">
                    <!-- Cards will be rendered here -->
                </div>
            </div>
        </section>

        <!-- Kuesioner Masyarakat -->
        <section class="page" id="kuesioner-masyarakat">
            <div class="page-header"><h1>Kuesioner Masyarakat</h1><p class="subtitle">Survei tanggapan dan kondisi sosial ekonomi masyarakat sekitar</p></div>
            
            <!-- Data Verifikator & Responden (Shared) -->
            <div class="verifikator-card modern-form">
                <div class="form-section"><h3>ğŸ“‹ Data Verifikator & Responden</h3>
                    <div class="form-row"><div class="form-group"><label>Nama Verifikator</label><input type="text" id="masy_verifikator" required></div><div class="form-group"><label>Nama Responden</label><input type="text" id="masy_responden" required></div></div>
                    <div class="form-row-3"><div class="form-group"><label>Tempat</label><input type="text" id="masy_tempat" placeholder="Kota/Kabupaten"></div><div class="form-group"><label>Tanggal</label><input type="date" id="masy_tanggal"></div><div class="form-group"><label>Jam</label><input type="time" id="masy_jam"></div></div>
                    <div class="form-row"><div class="form-group"><label>Koordinat</label><input type="text" id="masy_koordinat" placeholder="lat, long"></div><div class="form-group"><label>Jenis Kelamin</label><select id="masy_jk"><option value="Laki-laki">Laki-laki</option><option value="Perempuan">Perempuan</option></select></div></div>
                    <div class="form-row"><div class="form-group"><label>Umur</label><input type="number" id="masy_umur" min="0"></div><div class="form-group"><label>Pendidikan</label><select id="masy_pendidikan"><option value="SD">SD</option><option value="SMP">SMP</option><option value="SMA">SMA</option><option value="D3">D3</option><option value="S1">S1</option><option value="S2">S2</option></select></div></div>
                    <div class="form-row"><div class="form-group"><label>Pekerjaan/Jabatan</label><input type="text" id="masy_pekerjaan"></div><div class="form-group"><label>Alamat KTP</label><input type="text" id="masy_alamat"></div></div>
                </div>
            </div>

            <div class="tab-nav">
                <button class="tab-btn active" data-tab="masy-tab-a">A. Tanggapan Masyarakat</button>
                <button class="tab-btn" data-tab="masy-tab-b">B. Tingkat Kebahagiaan</button>
                <button class="tab-btn" data-tab="masy-tab-c">C. Pendapatan RT</button>
                <button class="tab-btn" data-tab="masy-tab-d">D. Sosial & Kelembagaan</button>
            </div>

            <!-- Tab A: Tanggapan Masyarakat -->
            <div class="tab-content active" id="masy-tab-a">
                <div class="form-container">
                    <form id="formMasyA" class="modern-form">
                        <div class="form-section"><h3>Tanggapan Pembangunan Bioflok</h3>
                            <div class="form-group"><label>Apakah rencana pembangunan sesuai kebutuhan masyarakat?</label><select id="ma_sesuai_kebutuhan"><option value="Ya, sesuai">Ya, sesuai</option><option value="Tidak sesuai">Tidak sesuai</option></select></div>
                            <div class="form-group"><label>Jika tidak sesuai, item apa yang tidak sesuai?</label><textarea id="ma_tidak_sesuai" rows="2"></textarea></div>
                            <div class="form-group"><label>Apakah senang terhadap rencana pembangunan?</label><select id="ma_senang"><option value="Senang">Senang</option><option value="Biasa saja">Biasa saja</option><option value="Tidak Senang">Tidak Senang</option></select></div>
                            <div class="form-group"><label>Alasan perasaan tersebut</label><textarea id="ma_alasan" rows="2"></textarea></div>
                            <div class="form-group"><label>Harapan masyarakat setelah pembangunan</label><textarea id="ma_harapan" rows="2"></textarea></div>
                            <div class="form-group"><label>Masukan/saran perbaikan</label><textarea id="ma_saran" rows="2"></textarea></div>
                        </div>
                        <button type="submit" class="btn-submit"><span class="btn-icon">ğŸ’¾</span>Simpan Bagian A</button>
                    </form>
                </div>
            </div>

            <!-- Tab B: Tingkat Kebahagiaan -->
            <div class="tab-content" id="masy-tab-b">
                <div class="form-container">
                    <form id="formMasyB" class="modern-form">
                        <div class="form-section"><h3>Rasa Aman & Kenyamanan Lingkungan</h3>
                            <p class="section-note">Pilihan: 1=Sangat Tidak Setuju, 2=Tidak Setuju, 3=Netral, 4=Setuju, 5=Sangat Setuju</p>
                            <div class="likert-item"><span class="likert-text">1. Saya merasa aman dengan kegiatan pembangunan kolam bioflok</span><div class="likert-scale"><label><input type="radio" name="mb_q1" value="1">1</label><label><input type="radio" name="mb_q1" value="2">2</label><label><input type="radio" name="mb_q1" value="3">3</label><label><input type="radio" name="mb_q1" value="4">4</label><label><input type="radio" name="mb_q1" value="5">5</label></div></div>
                            <div class="likert-item"><span class="likert-text">2. Pekerjaan fisik tidak mengganggu aktivitas sehari-hari</span><div class="likert-scale"><label><input type="radio" name="mb_q2" value="1">1</label><label><input type="radio" name="mb_q2" value="2">2</label><label><input type="radio" name="mb_q2" value="3">3</label><label><input type="radio" name="mb_q2" value="4">4</label><label><input type="radio" name="mb_q2" value="5">5</label></div></div>
                            <div class="likert-item"><span class="likert-text">3. Lingkungan sekitar masih nyaman ditinggali</span><div class="likert-scale"><label><input type="radio" name="mb_q3" value="1">1</label><label><input type="radio" name="mb_q3" value="2">2</label><label><input type="radio" name="mb_q3" value="3">3</label><label><input type="radio" name="mb_q3" value="4">4</label><label><input type="radio" name="mb_q3" value="5">5</label></div></div>
                            <div class="likert-item"><span class="likert-text">4. Tidak khawatir terhadap dampak lingkungan</span><div class="likert-scale"><label><input type="radio" name="mb_q4" value="1">1</label><label><input type="radio" name="mb_q4" value="2">2</label><label><input type="radio" name="mb_q4" value="3">3</label><label><input type="radio" name="mb_q4" value="4">4</label><label><input type="radio" name="mb_q4" value="5">5</label></div></div>
                            <div class="likert-item"><span class="likert-text">5. Kegiatan memperhatikan keselamatan & ketertiban</span><div class="likert-scale"><label><input type="radio" name="mb_q5" value="1">1</label><label><input type="radio" name="mb_q5" value="2">2</label><label><input type="radio" name="mb_q5" value="3">3</label><label><input type="radio" name="mb_q5" value="4">4</label><label><input type="radio" name="mb_q5" value="5">5</label></div></div>
                        </div>
                        <div class="form-section"><h3>Persepsi Dampak Sosial & Ekonomi</h3>
                            <div class="likert-item"><span class="likert-text">6. Berpotensi memberikan manfaat bagi masyarakat</span><div class="likert-scale"><label><input type="radio" name="mb_q6" value="1">1</label><label><input type="radio" name="mb_q6" value="2">2</label><label><input type="radio" name="mb_q6" value="3">3</label><label><input type="radio" name="mb_q6" value="4">4</label><label><input type="radio" name="mb_q6" value="5">5</label></div></div>
                            <div class="likert-item"><span class="likert-text">7. Membuka peluang kerja/usaha warga sekitar</span><div class="likert-scale"><label><input type="radio" name="mb_q7" value="1">1</label><label><input type="radio" name="mb_q7" value="2">2</label><label><input type="radio" name="mb_q7" value="3">3</label><label><input type="radio" name="mb_q7" value="4">4</label><label><input type="radio" name="mb_q7" value="5">5</label></div></div>
                            <div class="likert-item"><span class="likert-text">8. Mendorong kegiatan ekonomi lokal di masa depan</span><div class="likert-scale"><label><input type="radio" name="mb_q8" value="1">1</label><label><input type="radio" name="mb_q8" value="2">2</label><label><input type="radio" name="mb_q8" value="3">3</label><label><input type="radio" name="mb_q8" value="4">4</label><label><input type="radio" name="mb_q8" value="5">5</label></div></div>
                            <div class="likert-item"><span class="likert-text">9. Tidak menimbulkan konflik sosial</span><div class="likert-scale"><label><input type="radio" name="mb_q9" value="1">1</label><label><input type="radio" name="mb_q9" value="2">2</label><label><input type="radio" name="mb_q9" value="3">3</label><label><input type="radio" name="mb_q9" value="4">4</label><label><input type="radio" name="mb_q9" value="5">5</label></div></div>
                            <div class="likert-item"><span class="likert-text">10. Berdampak positif bagi desa/kelurahan</span><div class="likert-scale"><label><input type="radio" name="mb_q10" value="1">1</label><label><input type="radio" name="mb_q10" value="2">2</label><label><input type="radio" name="mb_q10" value="3">3</label><label><input type="radio" name="mb_q10" value="4">4</label><label><input type="radio" name="mb_q10" value="5">5</label></div></div>
                        </div>
                        <div class="form-section"><h3>Penerimaan Sosial & Harapan</h3>
                            <div class="likert-item"><span class="likert-text">11. Saya mendukung pembangunan kolam bioflok</span><div class="likert-scale"><label><input type="radio" name="mb_q11" value="1">1</label><label><input type="radio" name="mb_q11" value="2">2</label><label><input type="radio" name="mb_q11" value="3">3</label><label><input type="radio" name="mb_q11" value="4">4</label><label><input type="radio" name="mb_q11" value="5">5</label></div></div>
                            <div class="likert-item"><span class="likert-text">12. Berharap dikelola baik dan berkelanjutan</span><div class="likert-scale"><label><input type="radio" name="mb_q12" value="1">1</label><label><input type="radio" name="mb_q12" value="2">2</label><label><input type="radio" name="mb_q12" value="3">3</label><label><input type="radio" name="mb_q12" value="4">4</label><label><input type="radio" name="mb_q12" value="5">5</label></div></div>
                            <div class="likert-item"><span class="likert-text">13. Berharap masyarakat merasakan manfaat</span><div class="likert-scale"><label><input type="radio" name="mb_q13" value="1">1</label><label><input type="radio" name="mb_q13" value="2">2</label><label><input type="radio" name="mb_q13" value="3">3</label><label><input type="radio" name="mb_q13" value="4">4</label><label><input type="radio" name="mb_q13" value="5">5</label></div></div>
                            <div class="likert-item"><span class="likert-text">14. Pengelola bertanggung jawab atas dampak</span><div class="likert-scale"><label><input type="radio" name="mb_q14" value="1">1</label><label><input type="radio" name="mb_q14" value="2">2</label><label><input type="radio" name="mb_q14" value="3">3</label><label><input type="radio" name="mb_q14" value="4">4</label><label><input type="radio" name="mb_q14" value="5">5</label></div></div>
                            <div class="likert-item"><span class="likert-text">15. Bersedia mendukung keberlanjutan program</span><div class="likert-scale"><label><input type="radio" name="mb_q15" value="1">1</label><label><input type="radio" name="mb_q15" value="2">2</label><label><input type="radio" name="mb_q15" value="3">3</label><label><input type="radio" name="mb_q15" value="4">4</label><label><input type="radio" name="mb_q15" value="5">5</label></div></div>
                        </div>
                        <button type="submit" class="btn-submit"><span class="btn-icon">ğŸ’¾</span>Simpan Bagian B</button>
                    </form>
                </div>
            </div>

            <!-- Tab C: Pendapatan RT -->
            <div class="tab-content" id="masy-tab-c">
                <div class="form-container">
                    <form id="formMasyC" class="modern-form">
                        <div class="form-section"><h3>Rata-rata Pendapatan Rumah Tangga (Rp/bulan)</h3>
                            <div class="form-row"><div class="form-group"><label>Pendapatan Perikanan</label><input type="number" id="mc_pendapatan_ikan" min="0" placeholder="Rp"></div><div class="form-group"><label>Pendapatan di Luar Perikanan</label><input type="number" id="mc_pendapatan_lain" min="0" placeholder="Rp"></div></div>
                            <div class="form-group"><label>Total Pendapatan Rumah Tangga</label><input type="number" id="mc_total_pendapatan" min="0" placeholder="Rp"></div>
                        </div>
                        <div class="form-section"><h3>Analisis Pendapatan</h3>
                            <div class="form-group"><label>Kontribusi pendapatan pembudidaya terhadap total</label><select id="mc_kontribusi"><option value="<50%">&lt;50%</option><option value="50-80%">50-80%</option><option value=">80%">&gt;80%</option><option value="100%">100%</option></select></div>
                            <div class="form-group"><label>Jumlah sumber penghasilan rumah tangga</label><select id="mc_jml_sumber"><option value="1 sumber">1 sumber</option><option value="2 sumber">2 sumber</option><option value="3 sumber">3 sumber</option><option value=">3 sumber">&gt;3 sumber</option></select></div>
                            <div class="form-group"><label>Ketergantungan pada penghasilan perikanan</label><select id="mc_ketergantungan"><option value="Sangat bergantung">Sangat bergantung</option><option value="Cukup bergantung">Cukup bergantung</option><option value="Sedikit bergantung">Sedikit bergantung</option><option value="Tidak bergantung">Tidak bergantung</option></select></div>
                            <div class="form-group"><label>Tingkat stabilitas pendapatan pembudidaya</label><select id="mc_stabilitas"><option value="Stabil">Stabil</option><option value="Cenderung stabil">Cenderung stabil</option><option value="Tidak stabil">Tidak stabil</option><option value="Sangat tidak stabil">Sangat tidak stabil</option></select></div>
                        </div>
                        <div class="form-section"><h3>Peran Perempuan dalam Ekonomi RT</h3>
                            <div class="form-group"><label>Perempuan/istri diikutsertakan dalam kegiatan ekonomi RT?</label><select id="mc_peran_perempuan"><option value="Selalu">Selalu</option><option value="Sering">Sering</option><option value="Jarang">Jarang</option><option value="Tidak pernah">Tidak pernah</option></select></div>
                            <div class="form-group"><label>Rata-rata kontribusi perempuan dalam pendapatan RT</label><select id="mc_kontribusi_perempuan"><option value=">75%">&gt;75%</option><option value="51-75%">51-75%</option><option value="25-50%">25-50%</option><option value="<25%">&lt;25%</option><option value="Tidak dilibatkan">Tidak dilibatkan</option></select></div>
                        </div>
                        <button type="submit" class="btn-submit"><span class="btn-icon">ğŸ’¾</span>Simpan Bagian C</button>
                    </form>
                </div>
            </div>

            <!-- Tab D: Sosial & Kelembagaan -->
            <div class="tab-content" id="masy-tab-d">
                <div class="form-container">
                    <form id="formMasyD" class="modern-form">
                        <div class="form-section"><h3>Keanggotaan Kelompok Pembudidaya/KUB</h3>
                            <div class="form-group"><label>Apakah ikut serta sebagai anggota kelompok pembudidaya/KUB?</label><select id="md_anggota_kub"><option value="Ya sangat aktif">Ya sangat aktif</option><option value="Ya tidak aktif">Ya tidak aktif</option><option value="Tidak pernah">Tidak pernah</option><option value="Tidak ada KUB">Tidak ada KUB</option></select></div>
                            <div class="form-group"><label>Mendapat manfaat dari keanggotaan di KUB?</label><select id="md_manfaat_kub"><option value="Sangat Setuju">Sangat Setuju</option><option value="Setuju">Setuju</option><option value="Netral">Netral</option><option value="Tidak Setuju">Tidak Setuju</option><option value="Sangat Tidak Setuju">Sangat Tidak Setuju</option></select></div>
                        </div>
                        <div class="form-section"><h3>Keanggotaan Koperasi Perikanan</h3>
                            <div class="form-group"><label>Apakah ikut serta sebagai anggota koperasi perikanan?</label><select id="md_anggota_koperasi"><option value="Ya sangat aktif">Ya sangat aktif</option><option value="Ya tidak aktif">Ya tidak aktif</option><option value="Tidak pernah">Tidak pernah</option><option value="Tidak ada koperasi">Tidak ada koperasi</option></select></div>
                            <div class="form-group"><label>Jika belum, tertarik menjadi anggota koperasi?</label><select id="md_tertarik_koperasi"><option value="Sangat tertarik">Sangat tertarik</option><option value="Tertarik">Tertarik</option><option value="Tidak tertarik">Tidak tertarik</option><option value="Sangat tidak tertarik">Sangat tidak tertarik</option><option value="Sudah jadi anggota">Sudah jadi anggota</option></select></div>
                            <div class="form-group"><label>Mendapat manfaat dari koperasi perikanan?</label><select id="md_manfaat_koperasi"><option value="Sangat Setuju">Sangat Setuju</option><option value="Setuju">Setuju</option><option value="Netral">Netral</option><option value="Tidak Setuju">Tidak Setuju</option><option value="Sangat Tidak Setuju">Sangat Tidak Setuju</option></select></div>
                        </div>
                        <div class="form-section"><h3>Pendapat Umum tentang Koperasi (Ya/Tidak)</h3>
                            <div class="checklist-group">
                                <div class="checklist-item"><label class="toggle-label"><input type="checkbox" id="md_kop1"><span class="toggle-text">Koperasi rutin melakukan rapat anggota tahunan</span></label></div>
                                <div class="checklist-item"><label class="toggle-label"><input type="checkbox" id="md_kop2"><span class="toggle-text">Anda sebagai anggota aktif berpartisipasi</span></label></div>
                                <div class="checklist-item"><label class="toggle-label"><input type="checkbox" id="md_kop3"><span class="toggle-text">Pengurus koperasi saat ini kompeten</span></label></div>
                                <div class="checklist-item"><label class="toggle-label"><input type="checkbox" id="md_kop4"><span class="toggle-text">Pengurus menjalankan transparan dan akuntabel</span></label></div>
                                <div class="checklist-item"><label class="toggle-label"><input type="checkbox" id="md_kop5"><span class="toggle-text">Keuangan koperasi sehat</span></label></div>
                                <div class="checklist-item"><label class="toggle-label"><input type="checkbox" id="md_kop6"><span class="toggle-text">Koperasi memiliki jaringan pasar yang luas</span></label></div>
                                <div class="checklist-item"><label class="toggle-label"><input type="checkbox" id="md_kop7"><span class="toggle-text">Anda percaya dengan profesionalisme koperasi</span></label></div>
                            </div>
                        </div>
                        <button type="submit" class="btn-submit"><span class="btn-icon">ğŸ’¾</span>Simpan Bagian D</button>
                    </form>
                </div>
            </div>

            <!-- Import Excel Section -->
            <div class="import-section">
                <div class="import-card">
                    <div class="import-header">
                        <h3>ğŸ“¥ Import Data Excel</h3>
                        <p>Upload file Excel (.xlsx/.xls) untuk import data kuesioner Masyarakat secara massal</p>
                    </div>
                    <div class="import-actions">
                        <label class="import-btn">
                            <input type="file" id="importMasyExcel" accept=".xlsx,.xls" onchange="importMasyarakatFromExcel(event)" hidden>
                            <span class="import-icon">ğŸ“Š</span>
                            <span class="import-text">
                                <strong>Pilih File Excel</strong>
                                <small>Format: .xlsx atau .xls</small>
                            </span>
                        </label>
                        <button class="template-btn" onclick="downloadMasyarakatTemplate()">
                            <span>ğŸ“‹</span> Download Template
                        </button>
                    </div>
                </div>
            </div>

            <!-- Document Cards -->
            <div class="document-cards-container">
                <h3>ğŸ“„ Data Kuesioner Masyarakat Tersimpan</h3>
                <div class="document-cards-grid" id="masyCardsGrid">
                    <!-- Cards will be rendered here -->
                </div>
            </div>
        </section>

        <!-- Kuesioner SPPG -->
        <section class="page" id="kuesioner-sppg">
            <div class="page-header"><h1>Kuesioner SPPG</h1><p class="subtitle">Data kebutuhan ikan untuk Sentra Pengolahan Pangan Gizi (MBG)</p></div>
            
            <!-- Data Verifikator & Responden (Shared) -->
            <div class="verifikator-card modern-form">
                <div class="form-section"><h3>ğŸ“‹ Data Verifikator & Responden</h3>
                    <div class="form-row"><div class="form-group"><label>Nama Verifikator</label><input type="text" id="sppg_verifikator" required></div><div class="form-group"><label>Nama Responden</label><input type="text" id="sppg_responden" required></div></div>
                    <div class="form-row-3"><div class="form-group"><label>Tempat</label><input type="text" id="sppg_tempat" placeholder="Kota/Kabupaten"></div><div class="form-group"><label>Tanggal</label><input type="date" id="sppg_tanggal"></div><div class="form-group"><label>Jam</label><input type="time" id="sppg_jam"></div></div>
                    <div class="form-row"><div class="form-group"><label>Koordinat</label><input type="text" id="sppg_koordinat" placeholder="lat, long"></div><div class="form-group"><label>Jenis Kelamin</label><select id="sppg_jk"><option value="Laki-laki">Laki-laki</option><option value="Perempuan">Perempuan</option></select></div></div>
                    <div class="form-row"><div class="form-group"><label>Umur</label><input type="number" id="sppg_umur" min="0"></div><div class="form-group"><label>Pendidikan</label><select id="sppg_pendidikan"><option value="SD">SD</option><option value="SMP">SMP</option><option value="SMA">SMA</option><option value="D3">D3</option><option value="S1">S1</option><option value="S2">S2</option></select></div></div>
                    <div class="form-row"><div class="form-group"><label>Pekerjaan/Jabatan</label><input type="text" id="sppg_pekerjaan"></div><div class="form-group"><label>Alamat KTP</label><input type="text" id="sppg_alamat"></div></div>
                </div>
            </div>

            <div class="tab-nav">
                <button class="tab-btn active" data-tab="sppg-tab-a">A. Data SPPG & Kebutuhan</button>
                <button class="tab-btn" data-tab="sppg-tab-b">B. Preferensi Ikan</button>
                <button class="tab-btn" data-tab="sppg-tab-c">C. Rekapitulasi</button>
                <button class="tab-btn" data-tab="sppg-tab-d">D. Kendala & Kerjasama</button>
            </div>

            <!-- Tab A: Data SPPG -->
            <div class="tab-content active" id="sppg-tab-a">
                <div class="form-container">
                    <form id="formSppgA" class="modern-form">
                        <div class="form-section"><h3>Data SPPG & Kebutuhan Bulanan</h3>
                            <div class="form-row"><div class="form-group"><label>Nama SPPG</label><input type="text" id="sa_nama_sppg" required></div><div class="form-group"><label>Kabupaten/Kota</label><input type="text" id="sa_kabkota" required></div></div>
                            <div class="form-row"><div class="form-group"><label>Jumlah Sekolah Penerima MBG</label><input type="number" id="sa_jml_sekolah" min="0"></div><div class="form-group"><label>Jumlah Siswa Penerima MBG</label><input type="number" id="sa_jml_siswa" min="0"></div></div>
                            <div class="form-row"><div class="form-group"><label>Porsi MBG Harian</label><input type="number" id="sa_porsi_harian" min="0"></div><div class="form-group"><label>Porsi MBG Bulanan</label><input type="number" id="sa_porsi_bulanan" min="0"></div></div>
                        </div>
                        <div class="form-section"><h3>Kebutuhan Ikan Bulanan (Kg)</h3>
                            <div class="form-row"><div class="form-group"><label>Kebutuhan Lele (Kg/bulan)</label><input type="number" id="sa_kebutuhan_lele" min="0"></div><div class="form-group"><label>Kebutuhan Nila (Kg/bulan)</label><input type="number" id="sa_kebutuhan_nila" min="0"></div></div>
                            <div class="form-row"><div class="form-group"><label>Kebutuhan Ikan Lainnya (Kg/bulan)</label><input type="number" id="sa_kebutuhan_lain" min="0"></div><div class="form-group"><label>Frekuensi Menu Ikan/Minggu (Hari)</label><input type="number" id="sa_frekuensi" min="1" max="7"></div></div>
                            <div class="form-row"><div class="form-group"><label>Anggaran per Porsi (Rp)</label><input type="number" id="sa_anggaran_porsi" min="0"></div><div class="form-group"><label>Apakah Kebutuhan Protein Ikan Terpenuhi?</label><select id="sa_terpenuhi"><option value="Ya">Ya, sudah terpenuhi</option><option value="Belum">Belum terpenuhi</option></select></div></div>
                            <div class="form-group"><label>Jika belum terpenuhi, berapa banyak yang dibutuhkan? (Kg)</label><input type="number" id="sa_kekurangan" min="0" placeholder="Jumlah kekurangan"></div>
                        </div>
                        <button type="submit" class="btn-submit"><span class="btn-icon">ğŸ’¾</span>Simpan Bagian A</button>
                    </form>
                </div>
            </div>

            <!-- Tab B: Preferensi Ikan -->
            <div class="tab-content" id="sppg-tab-b">
                <div class="form-container">
                    <form id="formSppgB" class="modern-form">
                        <div class="form-section"><h3>Preferensi Jenis & Spesifikasi Ikan</h3>
                            <div class="form-group"><label>Jenis Ikan Prioritas</label>
                                <div class="checkbox-group">
                                    <label class="checkbox-label"><input type="checkbox" name="sb_jenis" value="Lele"><span class="checkmark"></span>Lele</label>
                                    <label class="checkbox-label"><input type="checkbox" name="sb_jenis" value="Nila"><span class="checkmark"></span>Nila</label>
                                    <label class="checkbox-label"><input type="checkbox" name="sb_jenis" value="Patin"><span class="checkmark"></span>Patin</label>
                                    <label class="checkbox-label"><input type="checkbox" name="sb_jenis" value="Lainnya"><span class="checkmark"></span>Lainnya</label>
                                </div>
                            </div>
                            <div class="form-group"><label>Jenis Ikan Lainnya (jika ada)</label><input type="text" id="sb_jenis_lain" placeholder="Sebutkan"></div>
                        </div>
                        <div class="form-section"><h3>Ukuran & Kondisi Ikan</h3>
                            <div class="form-group"><label>Ukuran/Kondisi Preferensi</label>
                                <div class="checkbox-group">
                                    <label class="checkbox-label"><input type="checkbox" name="sb_ukuran" value="Fillet"><span class="checkmark"></span>Fillet</label>
                                    <label class="checkbox-label"><input type="checkbox" name="sb_ukuran" value="Utuh"><span class="checkmark"></span>Ikan Utuh</label>
                                    <label class="checkbox-label"><input type="checkbox" name="sb_ukuran" value="Ukuran cm"><span class="checkmark"></span>Ukuran Tertentu (cm)</label>
                                    <label class="checkbox-label"><input type="checkbox" name="sb_ukuran" value="Ukuran kg"><span class="checkmark"></span>Ukuran Tertentu (kg)</label>
                                </div>
                            </div>
                            <div class="form-group"><label>Spesifikasi Ukuran (jika ada)</label><input type="text" id="sb_ukuran_detail" placeholder="Contoh: 15-20 cm atau 200-300 gram"></div>
                        </div>
                        <div class="form-section"><h3>Standar Kualitas</h3>
                            <div class="form-group"><label>Standar Kualitas Ikan</label>
                                <div class="checkbox-group">
                                    <label class="checkbox-label"><input type="checkbox" name="sb_kualitas" value="Segar"><span class="checkmark"></span>Segar (1 hari dari panen)</label>
                                    <label class="checkbox-label"><input type="checkbox" name="sb_kualitas" value="Beku"><span class="checkmark"></span>Beku (Frozen)</label>
                                    <label class="checkbox-label"><input type="checkbox" name="sb_kualitas" value="Olahan"><span class="checkmark"></span>Olahan</label>
                                </div>
                            </div>
                            <div class="form-group"><label>Sertifikasi yang Dibutuhkan</label>
                                <div class="checkbox-group">
                                    <label class="checkbox-label"><input type="checkbox" name="sb_sertifikasi" value="Bebas Formalin"><span class="checkmark"></span>Bebas Formalin</label>
                                    <label class="checkbox-label"><input type="checkbox" name="sb_sertifikasi" value="Terdaftar KKP"><span class="checkmark"></span>Terdaftar KKP</label>
                                    <label class="checkbox-label"><input type="checkbox" name="sb_sertifikasi" value="Halal"><span class="checkmark"></span>Halal</label>
                                    <label class="checkbox-label"><input type="checkbox" name="sb_sertifikasi" value="BPOM"><span class="checkmark"></span>BPOM</label>
                                </div>
                            </div>
                            <div class="form-group"><label>Sumber Prioritas</label>
                                <div class="checkbox-group">
                                    <label class="checkbox-label"><input type="checkbox" name="sb_sumber" value="Lokal KDMP"><span class="checkmark"></span>Lokal Bioflok KDMP</label>
                                    <label class="checkbox-label"><input type="checkbox" name="sb_sumber" value="Tambak MBG"><span class="checkmark"></span>Tambak Ikan MBG</label>
                                    <label class="checkbox-label"><input type="checkbox" name="sb_sumber" value="Pasar"><span class="checkmark"></span>Pasar</label>
                                    <label class="checkbox-label"><input type="checkbox" name="sb_sumber" value="Supplier"><span class="checkmark"></span>Supplier/Pengepul</label>
                                </div>
                            </div>
                        </div>
                        <button type="submit" class="btn-submit"><span class="btn-icon">ğŸ’¾</span>Simpan Bagian B</button>
                    </form>
                </div>
            </div>

            <!-- Tab C: Rekapitulasi -->
            <div class="tab-content" id="sppg-tab-c">
                <div class="form-container">
                    <form id="formSppgC" class="modern-form">
                        <div class="form-section"><h3>Rekapitulasi (Logistik & Harga)</h3>
                            <p class="section-note">Berikan penilaian tingkat kepentingan (1=Sangat Tidak Penting, 5=Sangat Penting) dan harga toleransi untuk setiap indikator</p>
                            
                            <div class="rekapitulasi-item">
                                <span class="rekap-label">1. Jenis Ikan Prioritas</span>
                                <div class="rekap-row"><div class="form-group"><label>Kepentingan (1-5)</label><select id="sc_penting1"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4" selected>4</option><option value="5">5</option></select></div><div class="form-group"><label>Harga Toleransi (Rp/kg)</label><input type="number" id="sc_harga1" min="0" placeholder="Rp/kg"></div></div>
                            </div>
                            <div class="rekapitulasi-item">
                                <span class="rekap-label">2. Ukuran/Kondisi</span>
                                <div class="rekap-row"><div class="form-group"><label>Kepentingan (1-5)</label><select id="sc_penting2"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4" selected>4</option><option value="5">5</option></select></div><div class="form-group"><label>Harga Toleransi (Rp/kg)</label><input type="number" id="sc_harga2" min="0" placeholder="Rp/kg"></div></div>
                            </div>
                            <div class="rekapitulasi-item">
                                <span class="rekap-label">3. Standar Kualitas</span>
                                <div class="rekap-row"><div class="form-group"><label>Kepentingan (1-5)</label><select id="sc_penting3"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4" selected>4</option><option value="5">5</option></select></div><div class="form-group"><label>Harga Toleransi (Rp/kg)</label><input type="number" id="sc_harga3" min="0" placeholder="Rp/kg"></div></div>
                            </div>
                            <div class="rekapitulasi-item">
                                <span class="rekap-label">4. Sertifikasi</span>
                                <div class="rekap-row"><div class="form-group"><label>Kepentingan (1-5)</label><select id="sc_penting4"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4" selected>4</option><option value="5">5</option></select></div><div class="form-group"><label>Harga Toleransi (Rp/kg)</label><input type="number" id="sc_harga4" min="0" placeholder="Rp/kg"></div></div>
                            </div>
                            <div class="rekapitulasi-item">
                                <span class="rekap-label">5. Sumber Prioritas</span>
                                <div class="rekap-row"><div class="form-group"><label>Kepentingan (1-5)</label><select id="sc_penting5"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4" selected>4</option><option value="5">5</option></select></div><div class="form-group"><label>Harga Toleransi (Rp/kg)</label><input type="number" id="sc_harga5" min="0" placeholder="Rp/kg"></div></div>
                            </div>
                        </div>
                        <button type="submit" class="btn-submit"><span class="btn-icon">ğŸ’¾</span>Simpan Bagian C</button>
                    </form>
                </div>
            </div>

            <!-- Tab D: Kendala & Kerjasama -->
            <div class="tab-content" id="sppg-tab-d">
                <div class="form-container">
                    <form id="formSppgD" class="modern-form">
                        <div class="form-section"><h3>Kendala Pasokan Ikan</h3>
                            <div class="form-group"><label>Kendala utama pasokan ikan saat ini</label>
                                <div class="checkbox-group">
                                    <label class="checkbox-label"><input type="checkbox" name="sd_kendala" value="Ketersediaan"><span class="checkmark"></span>Ketersediaan Ikan Terbatas</label>
                                    <label class="checkbox-label"><input type="checkbox" name="sd_kendala" value="Harga"><span class="checkmark"></span>Harga Tidak Stabil</label>
                                    <label class="checkbox-label"><input type="checkbox" name="sd_kendala" value="Kualitas"><span class="checkmark"></span>Kualitas Tidak Konsisten</label>
                                    <label class="checkbox-label"><input type="checkbox" name="sd_kendala" value="Logistik"><span class="checkmark"></span>Masalah Logistik/Pengiriman</label>
                                    <label class="checkbox-label"><input type="checkbox" name="sd_kendala" value="Supplier"><span class="checkmark"></span>Supplier Tidak Terpercaya</label>
                                    <label class="checkbox-label"><input type="checkbox" name="sd_kendala" value="Sertifikasi"><span class="checkmark"></span>Tidak Ada Sertifikasi</label>
                                </div>
                            </div>
                            <div class="form-group"><label>Kendala Lainnya</label><textarea id="sd_kendala_lain" rows="2"></textarea></div>
                        </div>
                        <div class="form-section"><h3>Minat Kerjasama dengan KDMP</h3>
                            <div class="form-group"><label>Apakah berminat kerjasama dengan KDMP Bioflok MBG?</label><select id="sd_minat"><option value="Ya, sangat berminat">Ya, sangat berminat</option><option value="Ya, berminat">Ya, berminat</option><option value="Mungkin">Mungkin/Perlu pertimbangan</option><option value="Tidak">Tidak berminat</option></select></div>
                            <div class="form-group"><label>Alasan ketertarikan/ketidaktertarikan</label><textarea id="sd_alasan" rows="2"></textarea></div>
                        </div>
                        <div class="form-section"><h3>Sarana & Kontrak</h3>
                            <div class="form-row"><div class="form-group"><label>Volume Kebutuhan untuk Proyek Bioflok (Kg/bulan)</label><input type="number" id="sd_volume" min="0"></div><div class="form-group"><label>Jenis Ikan yang Dibutuhkan</label><input type="text" id="sd_jenis" placeholder="Lele, Nila, dll"></div></div>
                            <div class="form-group"><label>Kontrak Pengadaan Saat Ini</label><select id="sd_kontrak"><option value="Ada">Ada kontrak aktif</option><option value="Tidak Ada">Tidak ada kontrak</option><option value="Dalam Proses">Dalam proses pengadaan</option></select></div>
                            <div class="form-group"><label>Target Kontrak 2026</label><textarea id="sd_target" rows="2" placeholder="Jelaskan rencana dan target kontrak tahun 2026"></textarea></div>
                        </div>
                        <button type="submit" class="btn-submit"><span class="btn-icon">ğŸ’¾</span>Simpan Bagian D</button>
                    </form>
                </div>
            </div>

            <!-- Import Excel Section -->
            <div class="import-section">
                <div class="import-card">
                    <div class="import-header">
                        <h3>ğŸ“¥ Import Data Excel</h3>
                        <p>Upload file Excel (.xlsx/.xls) untuk import data kuesioner SPPG secara massal</p>
                    </div>
                    <div class="import-actions">
                        <label class="import-btn">
                            <input type="file" id="importSppgExcel" accept=".xlsx,.xls" onchange="importSPPGFromExcel(event)" hidden>
                            <span class="import-icon">ğŸ“Š</span>
                            <span class="import-text">
                                <strong>Pilih File Excel</strong>
                                <small>Format: .xlsx atau .xls</small>
                            </span>
                        </label>
                        <button class="template-btn" onclick="downloadSPPGTemplate()">
                            <span>ğŸ“‹</span> Download Template
                        </button>
                    </div>
                </div>
            </div>

            <!-- Document Cards -->
            <div class="document-cards-container">
                <h3>ğŸ“„ Data Kuesioner SPPG Tersimpan</h3>
                <div class="document-cards-grid" id="sppgCardsGrid">
                    <!-- Cards will be rendered here -->
                </div>
            </div>
        </section>

        <!-- User Management (Admin Only) -->
        <section class="page" id="user-management">
            <div class="page-header"><h1>Manajemen User</h1><p class="subtitle">Kelola data pengguna sistem</p></div>
            
            <div class="user-management-container">
                <!-- Add User Form -->
                <div class="user-form-card">
                    <h3 id="userFormTitle">â• Tambah User Baru</h3>
                    <form id="userForm" class="user-form">
                        <input type="hidden" id="editUserId">
                        <div class="form-row">
                            <div class="form-group">
                                <label>Username</label>
                                <input type="text" id="userUsername" placeholder="Username" required>
                            </div>
                            <div class="form-group">
                                <label>Nama Lengkap</label>
                                <input type="text" id="userName" placeholder="Nama lengkap" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Password</label>
                                <div class="password-wrapper">
                                    <input type="password" id="userPassword" placeholder="Password">
                                    <button type="button" class="toggle-password" onclick="toggleUserPassword()">ğŸ‘ï¸</button>
                                </div>
                                <small id="passwordHint">Kosongkan jika tidak ingin mengubah password</small>
                            </div>
                            <div class="form-group">
                                <label>Role</label>
                                <select id="userRole" required>
                                    <option value="verifikator">Verifikator</option>
                                    <option value="admin">Admin</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn-submit"><span class="btn-icon">ğŸ’¾</span>Simpan User</button>
                            <button type="button" class="btn-cancel" onclick="cancelEditUser()">Batal</button>
                        </div>
                    </form>
                </div>

                <!-- User Table -->
                <div class="user-table-card">
                    <h3>ğŸ‘¥ Daftar User</h3>
                    <div class="table-responsive">
                        <table class="user-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Username</th>
                                    <th>Nama</th>
                                    <th>Role</th>
                                    <th>Aksi</th>
                                </tr>
                            </thead>
                            <tbody id="userTableBody">
                                <!-- Rows will be rendered here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Detail Modal -->
    <div class="modal-overlay" id="detailModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><span>ğŸ“‹</span><span id="modalTitle">Detail Record</span></h3>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Modal content will be rendered here -->
            </div>
            <div class="modal-footer">
                <button class="modal-btn secondary" onclick="closeModal()">Tutup</button>
                <button class="modal-btn danger" id="modalDeleteBtn">ğŸ—‘ï¸ Hapus</button>
            </div>
        </div>
    </div>

    <div class="toast" id="toast"><span class="toast-icon">âœ…</span><span class="toast-message">Data berhasil disimpan!</span></div>
    <script src="app.js"></script>
</body>
</html>
